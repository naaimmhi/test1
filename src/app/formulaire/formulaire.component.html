<div
  class="flex items-center justify-between p-4 bg-blue-500 rounded-lg shadow-md"
>
  <!-- Input de recherche -->
  <div class="flex items-center space-x-2">
    <input
      type="text"
      (input)="searchInputChanged($event)"
      class="p-2 border border-gray-300 rounded-md focus:outline-none"
      placeholder="Rechercher un produit"
    />
  </div>
</div>

<!-- Formulaire pour ajouter un produit -->
<div class="flex items-center mt-4 ml-5 space-x-2">
  <input
    type="text"
    [(ngModel)]="title"
    class="p-2 border border-gray-300 rounded-md focus:outline-none"
    placeholder="Titre du produit"
  />
  <input
    type="text"
    [(ngModel)]="category"
    class="p-2 border border-gray-300 rounded-md focus:outline-none"
    placeholder="Catégorie"
  />
  <button
    class="px-4 py-2 text-white bg-yellow-300 rounded-md hover:bg-green-400"
    (click)="
      editingProductId ? updateProduct() : addProduct({ title, category })
    "
  >
    {{ editingProductId ? "Modifier" : "Ajouter" }}
  </button>
</div>

<!-- Tableau -->
<table class="min-w-full mt-4 bg-white border border-gray-300 rounded-lg">
  <thead class="text-center text-white bg-blue-500">
    <tr>
      <th class="px-4 py-2 col-2">ID</th>
      <th class="px-4 py-2 col-5">Titre</th>
      <th class="px-4 py-2 col-3">Catégorie</th>
      <th class="px-4 py-2 col-2">Actions</th>
    </tr>
  </thead>
  <tbody class="text-center">
    <tr *ngFor="let p of products" class="hover:bg-gray-100">
      <td class="px-4 py-2 border-b border-gray-200">{{ p.id }}</td>
      <td class="px-4 py-2 border-b border-gray-200">{{ p.title }}</td>
      <td class="px-4 py-2 border-b border-gray-200">{{ p.category }}</td>
      <td
        class="flex items-center justify-center space-x-2 border-b border-gray-200"
      >
        <button
          class="p-1 text-black bg-green-200 rounded-md"
          aria-label="Modifier"
          matTooltip="Editer"
          matTooltipPosition="above"
          (click)="editProduct(p)"
        >
          <mat-icon>border_color</mat-icon>
        </button>
        <button
          class="p-1 text-black bg-red-200 rounded-md"
          aria-label="Supprimer"
          matTooltip="Supprimer"
          matTooltipPosition="above"
          (click)="deleteProduct(p.id)"
        >
          <mat-icon>delete_forever</mat-icon>
        </button>
      </td>
    </tr>
  </tbody>
</table>

<div>
  <p-paginator
    (onPageChange)="onPageChange($event)"
    [first]="first"
    [rows]="rows"
    [totalRecords]="totalRecords"
    [rowsPerPageOptions]="[10, 20, 30]"
  />
</div>
